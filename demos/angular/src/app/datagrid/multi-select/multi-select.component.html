<h2>@cds/core multi-action grid</h2>
<cds-accordion cds-layout="m-y:md">
  <cds-accordion-panel [expanded]="showDevNotes" (expandedChange)="showDevNotes = !showDevNotes">
    <cds-accordion-header>Dev notes for multi select grids</cds-accordion-header>
    <cds-accordion-content>
      <p>
        Multi-select grids can be implemented with an Angular reactive form. There are two things it needs to track, if
        all rows are selected and a FormGroup of checkboxes to manage selected rows. The FormControl's for each row can
        easily be generated by iterating over all of the rows which need to have selection. The application can pick and
        choose which rows are selectable based on its specifications. Once the controls are generated, the rows acn also
        be generating in the template and associate the formControlName with the reactive control that was generated for
        it. Finally, to manage selection anf values for hte form, subscribe to the valueChanges for the form and use the
        row model to identify and update the associated form control.
      </p>
      <p>
        The other things the grid needs to know, which rows are selected, are all rows selected, etc can all be derived
        by the application with applied iteration of the model data, the form controls or both and commoon JavaScript
        api's that map, filter, sort etc teArray or other aggregate JavaScript data types.
      </p>
    </cds-accordion-content>
  </cds-accordion-panel>
</cds-accordion>
<div>
  <h4>Selected CDS VMs</h4>
  <section cds-layout="horizontal gap:md" *ngIf="selectedItems.length > 0">
    <div *ngFor="let vm of selectedItems">{{ vm?.id }}</div>
  </section>
</div>
<div [formGroup]="multiSelectForm">
  <cds-grid aria-label="column visibility datagrid demo" style="--body-height: 360px;">
    <cds-grid-column type="action" resizable="hidden">
      <cds-checkbox>
        <input
          type="checkbox"
          formControlName="allRows"
          [indeterminate]="selectedCount > 0 && selectedCount < data.length"
          aria-label="select all hosts"
        />
      </cds-checkbox>
    </cds-grid-column>
    <cds-grid-column *ngFor="let column of dataFields" [id]="column">
      {{ column | titlecase }}
    </cds-grid-column>

    <cds-grid-row
      *ngFor="let vm of data; let i = index"
      formGroupName="rows"
      [selected]="multiSelectForm.controls.rows.get(vm.id)?.value"
    >
      <cds-grid-cell type="action">
        <cds-checkbox>
          <input type="checkbox" [formControlName]="vm.id" aria-label="select host" />
        </cds-checkbox>
      </cds-grid-cell>
      <cds-grid-cell *ngFor="let column of dataFields">
        {{ $any(vm)[column] }}
      </cds-grid-cell>
    </cds-grid-row>
    <cds-grid-footer> There are {{ data.length }} virtual machines. </cds-grid-footer>
  </cds-grid>
</div>

<h2>@clr/angular Hideable columns datagrid</h2>
<p>This is a basic <strong>@clr/angular</strong> datagrid.</p>
<section cds-layout="m-y:md">
  <h3>Selected clr VMs:</h3>
  <div *ngIf="clrNgSelected.length > 0" cds-layout="horizontal gap:md">
    <span *ngFor="let vm of clrNgSelected">{{ vm.id }} </span>
  </div>
</section>
<clr-datagrid style="height: 360px;" [(clrDgSelected)]="clrNgSelected">
  <clr-dg-column *ngFor="let column of dataFields">{{ column }}</clr-dg-column>
  <clr-dg-row *ngFor="let vm of data" [clrDgItem]="vm">
    <clr-dg-cell *ngFor="let column of dataFields">
      {{ $any(vm)[column] }}
    </clr-dg-cell>
  </clr-dg-row>
  <clr-dg-footer>Datagrid footer</clr-dg-footer>
</clr-datagrid>
