<!--
  ~ Copyright (c) 2016-2020 VMware, Inc. All Rights Reserved.
  ~ This software is released under MIT license.
  ~ The full license information can be found in LICENSE in the root directory of this project.
  -->

<clr-doc-wrapper [ng]="ng" [ui]="ui" [title]="title" [newLayout]="true">
  <article>
    <h5 class="component-summary">
      A combobox is a complex element, which can be considered as a combination of two elements - a dropdown list and a
      text input. The text input is used for quick search and filtering of the predefined options from the dropdown
      list.
    </h5>

    <div class="design-guidelines">
      <h3>Usage</h3>

      <p>
        Use a combobox when you need to have a list of options with search and filtering capabilities. This is a common
        pattern in web UI and is similar to the native datalist. In contrast to the datalist, a combobox features
        multiple selection and possibility to build richer UI for each option in the list, with images and styling.
        Adding free text input that is not part of the predefined list is not supported in the combobox.
      </p>

      <p>
        The combobox can be configured in several different ways, depending on how the options are loaded, whether a
        single value or multiple values can be selected.
      </p>

      <p>
        Do not confuse a Combobox element with the datalist or select controls.
        <a routerLink="../../datalist">Datalist</a> elements are good for simple values to quickly search. A
        <a routerLink="../../select">select</a> input is useful when you want to use the browser native select control
        that does not need more complex searching and filtering capabilities.
      </p>

      <h3>List of basic static options</h3>

      <div class="clr-row">
        <div class="clr-col-md-6 clr-col-12">
          <p>
            This basic type of combobox features declarative list of options. It's suitable for smaller, static lists.
          </p>
          <p>
            The current selection is pre-filled in the text input box. Changing the input text does not change the
            selection until an option is selected from the drop down list. Selection can only be changed, not deleted.
          </p>
        </div>
        <div class="clr-col-md-6 clr-col-12">
          <div class="clrweb-DoxMedia">
            <div class="clrweb-DoxMedia-block">
              <div class="clrweb-DoxMedia-img">
                <img
                  src="/assets/images/documentation/combobox/combobox-simple.png"
                  alt="Sample Combobox"
                  class="clrweb-Img"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Single selection combobox</h3>

      <div class="clr-row">
        <div class="clr-col-md-6 clr-col-12">
          <p>
            This type is dynamic and is generated from an array of data. The user supplies a template which tells how
            any option will be displayed in the list. When an option is selected, its display name gets populated in the
            search box.
          </p>
        </div>
        <div class="clr-col-md-6 clr-col-12">
          <div class="clrweb-DoxMedia">
            <div class="clrweb-DoxMedia-block">
              <div class="clrweb-DoxMedia-img">
                <img
                  src="/assets/images/documentation/combobox/combobox-single.png"
                  alt="Single selection Combobox"
                  class="clrweb-Img"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Mutli selection combobox</h3>

      <div class="clr-row">
        <div class="clr-col-md-6 clr-col-12">
          <p>
            The multi select combobox is similar to the single select one, as it is data driven and allows for detailed
            configuration of the option display. After selection is made, a pill is created that corresponds to the
            selected item. Multi selection is achieved by subsequent selection from the drop down list, adding pills to
            the pills list.
          </p>
        </div>
        <div class="clr-col-md-6 clr-col-12">
          <div class="clrweb-DoxMedia">
            <div class="clrweb-DoxMedia-block">
              <div class="clrweb-DoxMedia-img">
                <img
                  src="/assets/images/documentation/combobox/combobox-multi.png"
                  alt="Multi selection Combobox"
                  class="clrweb-Img"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Asynchronous combobox</h3>

      <div class="clr-row">
        <div class="clr-col-md-6 clr-col-12">
          <p>
            The asynchronous scenario allows for lazy loading of the pre-selected options. There is a "loading" spinner
            and message that's displayed before the options load is complete.
          </p>
        </div>
        <div class="clr-col-md-6 clr-col-12">
          <div class="clrweb-DoxMedia">
            <div class="clrweb-DoxMedia-block">
              <div class="clrweb-DoxMedia-img">
                <img
                  src="/assets/images/documentation/combobox/combobox-async.png"
                  alt="Asynchronous selection Combobox"
                  class="clrweb-Img"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Anatomy</h3>

      <div class="clr-row">
        <div class="clr-col-md-6 clr-col-12">
          <p>
            As part of the forms elements collection, the Combobox has a label, that can be vertically or horizontally
            aligned to it. It also has a condensed mode, that occupies less space. It has helper text and error/success
            message area. The component itself has a text input where the users enter the search text and a dropdown
            area, with a list of predefined options which can be styled by the user. The multi select version of the
            combobox has a list of pills that is situated before the text input. These pills all feature a delete
            button, and can also be styled, similarly to the options.
          </p>
        </div>
        <div class="clr-col-md-6 clr-col-12">
          <div class="clrweb-DoxMedia">
            <div class="clrweb-DoxMedia-block">
              <div class="clrweb-DoxMedia-img">
                <img
                  src="/assets/images/documentation/combobox/combobox-anatomy.png"
                  alt="Anatomy of the Combobox"
                  class="clrweb-Img"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Behavior</h3>

      <h4>Interacting with current selection</h4>

      <p>
        For single selection, the current selection is pre-filled in the text input box. Changing the input text does
        not change the selection until an option is selected from the drop down list. Selection can only be changed, not
        deleted.
      </p>
      <p>
        For multi selection, the current selection is displayed as a list of pills before the input box. New pills can
        be added from the drop down list. Pills can be deleted by clicking the "X" icon on each pill. Also, pressing
        Backspace key in an empty input box will select the last pill in the list.
      </p>

      <h4>Opening the drop down</h4>

      <p>
        The drop down with the pre-selected options can be opened either by clicking on the down caret icon at the end
        of the input text box, or by typing into the text box.
      </p>

      <h4>Interacting with the options</h4>

      <p>
        Options can be mouse clicked to be selected. Also keyboard navigation with the arrow keys and selection with
        Enter key is available. Selected option/s are highlighted in the list.
      </p>

      <h4>Filtering the options list</h4>

      <p>
        Typing in the input text box will filter the drop down list of predefined options. This works in all cases with
        the exception of the basic, declarative list with static options, as they don't use the smart options iterator
        which is used in the dynamic scenarios.
      </p>
    </div>
    <div class="code-examples">
      <h3 id="examples">Code &amp; Examples</h3>

      <p>
        A basic static combobox can be created by directly nesting <code class="clr-code">clr-option</code> components
        in the <code class="clr-code">clr-options</code> container.
      </p>

      <clr-combobox-basic-demo></clr-combobox-basic-demo>

      <h3>Single Selection</h3>

      <p>
        A single selection combobox uses the <code class="clr-code">*clrOptionItems</code> smart iterator to manage its
        inventory of pre-selected options. It is similar to <code class="clr-code">*NgFor</code> as syntax. The optional
        <code class="clr-code">field:'name'</code> designates which field of the underlying data object should be used
        as display name. The html nested inside the <code class="clr-code">clr-option</code> node will be used as
        template for the option design. It can include images, text, html code.
      </p>

      <clr-combobox-single-demo></clr-combobox-single-demo>

      <h3>Mutli Selection</h3>

      <p>
        The multi selection mode is triggered with a <code class="clr-code">clrMulti="true"</code> attribute on the
        Combobox component. In regard to option management, the multi select combobox works the same as the single
        select one. It uses <code class="clr-code">*clrOptionItems</code> smart iterator and a template inside each
        option node for option styling. Pill styling is defined inside ng-container with
        <code class="clr-code">*clrOptionSelected</code> structural directive, as seen in the example.
      </p>

      <clr-combobox-multi-demo></clr-combobox-multi-demo>

      <h3>Asynchronous Selection</h3>

      <p>
        Using the combobox asynchronously requires to manually bind several event handlers on the Combobox component.
        <code class="clr-code">(clrInputChange)="fetchStates($event)"</code> and
        <code class="clr-code">(clrOpenChange)="$event ? fetchStates() : null"</code> need to be bound to your method
        that fetches the backend data ("fetchStates()" in this example). Then
        <code class="clr-code">[clrLoading]="loading"</code>, which triggers the display of the "loading" indicator,
        should be bound to a property that is active while your data fetching called is in progress.
      </p>

      <clr-combobox-async-demo></clr-combobox-async-demo>
    </div>
  </article>
</clr-doc-wrapper>
