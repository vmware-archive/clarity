import { Meta, Props, Story, Preview } from '@web/storybook-prebuilt/addon-docs/blocks.js';

<Meta title="Forms/Checkbox" />

# Checkbox

Checkboxes are used for one to many selection options. Checkboxes are not for
mutually exclusive lists. Each checkbox can be selected independent of the
state of another.

## Installation

To use the checkbox component import the component in your JavaScript.

```typescript
import '@cds/core/checkbox/register.js';
```

```html
<cds-checkbox>
  <label>checkbox</label>
  <input type="checkbox" />
  <cds-control-message>message text</cds-control-message>
</cds-checkbox>
```

## Checkbox

<Preview>
  <Story id="stories-checkbox--checkbox" />
</Preview>

## Status

<Preview>
  <Story id="stories-checkbox--status" />
</Preview>

## Vertical Group

<Preview>
  <Story id="stories-checkbox--vertical-group" />
</Preview>

## Vertical Inline Group

<Preview>
  <Story id="stories-checkbox--vertical-inline-group" />
</Preview>

## Horizontal Group

<Preview>
  <Story id="stories-checkbox--horizontal-group" />
</Preview>

## Horizontal Inline Group

<Preview>
  <Story id="stories-checkbox--horizontal-inline-group" />
</Preview>

## Compact Group

<Preview>
  <Story id="stories-checkbox--compact-group" />
</Preview>

## Inline Group Control Messages

<Preview>
  <Story id="stories-checkbox--inline-group-control-messages" />
</Preview>

## Dark Theme

<Preview>
  <Story id="stories-checkbox--dark-theme" />
</Preview>

## Checkbox API

<Props of={'cds-checkbox'} />

## Checkbox Group API

<Props of={'cds-checkbox-group'} />

## React Usage

React doesn't expose `indeterminate` as a prop on `input` components,
the attribute must be set using a `ref`.

```typescript
const Component = ({ indeterminate }) => {
  const inputRef = useRef<HTMLInputElement>();

  useLayoutEffect(() => {
    if (ref.current) {
      ref.current.indeterminate = indeterminate;
    }
  }, [indeterminate]);

  return (
    <CdsCheckbox>
      <label>label</label>
      <input type="checkbox" ref={inputRef} />
    </CdsCheckbox>
  );
};
```

This can also be extracted into a custom hook for reuse:

```typescript
const useIndeterminateCheckbox = (indeterminate: boolean) => {
  const ref = useRef<HTMLInputElement>(null);

  useLayoutEffect(() => {
    if (ref.current) {
      ref.current.indeterminate = indeterminate;
    }
  }, [indeterminate]);

  return [ref];
};

const Component = ({ indeterminate }) => {
  const [inputRef] = useIndeterminateCheckbox(indeterminate);

  return (
    <CdsCheckbox>
      <label>label</label>
      <input type="checkbox" ref={inputRef} />
    </CdsCheckbox>
  );
};
```
